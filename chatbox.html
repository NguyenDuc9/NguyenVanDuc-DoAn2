<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatbox T∆∞ v·∫•n hoa üå∏</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f9f9f9;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }
      .chatbox {
        background: white;
        width: 400px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        padding: 16px;
      }
      .messages {
        height: 300px;
        overflow-y: auto;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 10px;
        background: #f7f7f7;
        margin-bottom: 10px;
      }
      .msg {
        margin: 8px 0;
        padding: 8px 12px;
        border-radius: 10px;
        max-width: 80%;
      }
      .bot {
        background: #e3f2fd;
        color: #333;
        align-self: flex-start;
      }
      .user {
        background: #4caf50;
        color: white;
        align-self: flex-end;
        margin-left: auto;
      }
      form {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      select,
      input {
        padding: 6px;
        border-radius: 6px;
        border: 1px solid #ccc;
      }
      button {
        background: #4caf50;
        color: white;
        border: none;
        padding: 8px;
        border-radius: 6px;
        cursor: pointer;
      }
      button:hover {
        background: #43a047;
      }
    </style>
  </head>
  <body>
    <div class="chatbox">
      <h2>Chatbox t∆∞ v·∫•n hoa üå∏</h2>
      <div id="messages" class="messages"></div>
      <form id="flowerForm">
        <label
          >Tu·ªïi: <input type="number" id="age" value="25" min="1" max="120"
        /></label>
        <label
          >S·ª± ki·ªán:
          <select id="eventType">
            <option>Sinh nh·∫≠t</option>
            <option>K·ª∑ ni·ªám</option>
            <option>Ch√∫c m·ª´ng</option>
            <option>Xin l·ªói</option>
            <option>L√£ng m·∫°n</option>
            <option>T·∫∑ng th·∫ßy c√¥</option>
            <option>Kh√°c</option>
          </select>
        </label>
        <label
          >M√†u ∆∞a th√≠ch:
          <select id="color">
            <option>H·ªìng</option>
            <option>ƒê·ªè</option>
            <option>Tr·∫Øng</option>
            <option>Pastel</option>
            <option>R·ª±c r·ª°</option>
          </select>
        </label>
        <label
          >Phong c√°ch:
          <select id="style">
            <option>Hi·ªán ƒë·∫°i</option>
            <option>C·ªï ƒëi·ªÉn</option>
            <option>T·ªëi gi·∫£n</option>
          </select>
        </label>
        <label
          >Ng√¢n s√°ch:
          <select id="budget">
            <option>Th·∫•p</option>
            <option>Trung b√¨nh</option>
            <option>Cao</option>
          </select>
        </label>
        <button type="submit">T∆∞ v·∫•n</button>
        <button type="button" id="resetBtn">L√†m l·∫°i</button>
      </form>
    </div>

    <script>
      const messagesDiv = document.getElementById("messages");
      const form = document.getElementById("flowerForm");
      const resetBtn = document.getElementById("resetBtn");

      function addMessage(text, from = "bot") {
        const div = document.createElement("div");
        div.className = `msg ${from}`;
        div.textContent = text;
        messagesDiv.appendChild(div);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      }

      function generateSuggestion(age, eventType, prefs) {
        // --- Ph√¢n lo·∫°i tu·ªïi ---
        const ageGroup =
          age < 18
            ? "teen"
            : age <= 30
            ? "young"
            : age <= 50
            ? "adult"
            : "senior";

        // --- G·ª£i √Ω hoa theo s·ª± ki·ªán ---
        const eventGuide = {
          "Sinh nh·∫≠t": {
            flowers: ["Hoa h·ªìng pastel", "Baby", "Tulip", "H∆∞·ªõng d∆∞∆°ng"],
            tone: "vui t∆∞∆°i, r·ª±c r·ª°",
            card: "Ch√∫c b·∫°n th√™m tu·ªïi m·ªõi tr√†n ƒë·∫ßy ni·ªÅm vui v√† h·∫°nh ph√∫c!",
          },
          "K·ª∑ ni·ªám": {
            flowers: ["Hoa h·ªìng ƒë·ªè", "M·∫´u ƒë∆°n", "Lan h·ªì ƒëi·ªáp"],
            tone: "l√£ng m·∫°n, trang tr·ªçng",
            card: "C·∫£m ∆°n v√¨ ƒë√£ lu√¥n ƒë·ªìng h√†nh. Ch√∫c ch√∫ng ta c√≤n nhi·ªÅu k·ª∑ ni·ªám ƒë·∫πp n·ªØa!",
          },
          "Ch√∫c m·ª´ng": {
            flowers: ["H∆∞·ªõng d∆∞∆°ng", "C·∫©m ch∆∞·ªõng", "Lily", "Lan"],
            tone: "t·ª± tin, m·∫°nh m·∫Ω",
            card: "Ch√∫c m·ª´ng b·∫°n ƒë·∫°t ƒë∆∞·ª£c th√†nh c√¥ng x·ª©ng ƒë√°ng!",
          },
          "Xin l·ªói": {
            flowers: ["H·ªìng kem", "Tulip tr·∫Øng", "Lily tr·∫Øng"],
            tone: "nh·∫π nh√†ng, ch√¢n th√†nh",
            card: "M√¨nh th·∫≠t s·ª± xin l·ªói. Mong ƒë∆∞·ª£c tha th·ª©.",
          },
          "L√£ng m·∫°n": {
            flowers: ["H·ªìng ƒë·ªè", "H·ªìng Ecuador", "Tulip ƒë·ªè"],
            tone: "n·ªìng n√†n, s√¢u s·∫Øc",
            card: "G·ª≠i t·ªõi ng∆∞·ªùi ƒë·∫∑c bi·ªát nh·∫•t trong tr√°i tim m√¨nh.",
          },
          "T·∫∑ng th·∫ßy c√¥": {
            flowers: ["Lan h·ªì ƒëi·ªáp", "H∆∞·ªõng d∆∞∆°ng", "C·∫©m ch∆∞·ªõng"],
            tone: "t√¥n tr·ªçng, bi·∫øt ∆°n",
            card: "Ch√∫c th·∫ßy/c√¥ lu√¥n m·∫°nh kh·ªèe v√† tr√†n ƒë·∫ßy nhi·ªát huy·∫øt.",
          },
          Kh√°c: {
            flowers: ["Hoa h·ªìng", "Baby", "Lily"],
            tone: "nh√£ nh·∫∑n",
            card: "Ch√∫c b·∫°n m·ªôt ng√†y th·∫≠t tuy·ªát v·ªùi!",
          },
        };

        const event = eventGuide[eventType];

        // --- G·ª£i √Ω theo tu·ªïi ---
        const ageTips = {
          teen: "Tu·ªïi teen ph√π h·ª£p v·ªõi c√°c b√≥ hoa d·ªÖ th∆∞∆°ng, m√†u pastel, ki·ªÉu d√°ng nh·ªè g·ªçn.",
          young:
            "Ng∆∞·ªùi tr·∫ª ∆∞a phong c√°ch hi·ªán ƒë·∫°i, ph√° c√°ch ‚Äì ph·ªëi nhi·ªÅu m√†u ho·∫∑c hoa ƒë·ªôc ƒë√°o.",
          adult:
            "Ng∆∞·ªùi tr∆∞·ªüng th√†nh th∆∞·ªùng th√≠ch s·ª± tinh t·∫ø, sang tr·ªçng ‚Äì lan, lily, m·∫´u ƒë∆°n.",
          senior:
            "Ng∆∞·ªùi l·ªõn tu·ªïi h·ª£p hoa trang nh√£, nh·∫π nh√†ng nh∆∞ lan tr·∫Øng, c·∫©m ch∆∞·ªõng.",
        };

        // --- G·ª£i √Ω theo phong c√°ch ---
        const styleNote = {
          "Hi·ªán ƒë·∫°i": "B·ªë c·ª•c t·ª± do, ph·ªëi m√†u trendy, gi·∫•y g√≥i H√†n Qu·ªëc.",
          "C·ªï ƒëi·ªÉn": "Thi·∫øt k·∫ø tr√≤n, c√¢n ƒë·ªëi, t√¥ng tr·∫ßm ‚Äì ruy bƒÉng b·∫£n l·ªõn.",
          "T·ªëi gi·∫£n": "B√≥ g·ªçn, √≠t chi ti·∫øt, gi·∫•y kraft ho·∫∑c gi·∫•y tr·∫Øng tinh.",
        };

        // --- G·ª£i √Ω theo ng√¢n s√°ch ---
        const budgetNote = {
          Th·∫•p: "G·ª£i √Ω: b√≥ mini 200k ‚Äì 350k.",
          "Trung b√¨nh": "G·ª£i √Ω: b√≥ size M ƒë·∫πp ch·ªâ 400k ‚Äì 650k.",
          Cao: "G·ª£i √Ω: b√≥ cao c·∫•p t·ª´ 800k ‚Äì 1.5 tri·ªáu, r·∫•t sang tr·ªçng.",
        };

        // --- M√†u s·∫Øc ∆∞u ti√™n ---
        const colorTone = `M√†u ch·ªß ƒë·∫°o kh√°ch th√≠ch: **${prefs.color}** ‚Äì s·∫Ω ph·ªëi theo tone ph√π h·ª£p.`;

        // --- T·ªïng h·ª£p g·ª£i √Ω ---
        const summary = `üå∏ **G·ª£i √Ω b√≥ hoa cho ${eventType.toLowerCase()}**:
‚Ä¢ C√°c lo·∫°i ph√π h·ª£p: **${event.flowers.join(", ")}**
‚Ä¢ Phong c√°ch: **${event.tone}**
‚Ä¢ M√†u s·∫Øc: ∆∞u ti√™n tone **${prefs.color}**
‚Ä¢ Thi·∫øt k·∫ø: ${styleNote[prefs.style]}`;

        // --- Chi ti·∫øt n√¢ng cao ---
        const details = `üí° **Ph√¢n t√≠ch theo tu·ªïi:** ${ageTips[ageGroup]}

üí∞ **Ng√¢n s√°ch:** ${budgetNote[prefs.budget]}

üíå **G·ª£i √Ω thi·ªáp n√™n ghi:**  
"${event.card}"

üåº **G·ª£i √Ω m·∫´u th·ª±c t·∫ø ph√π h·ª£p nh·∫•t:**
- M·ªôt b√≥ ${event.flowers[0]} ph·ªëi v·ªõi Baby tr·∫Øng t·∫°o c·∫£m gi√°c tinh t·∫ø.
- Th√™m ch√∫t l√° b·∫°c ƒë·ªÉ tƒÉng ƒëi·ªÉm sang tr·ªçng.
- G√≥i theo phong c√°ch ${prefs.style.toLowerCase()} gi√∫p t√¥n hoa m√† kh√¥ng b·ªã r·ªëi.

üëâ N·∫øu mu·ªën ·∫•n t∆∞·ª£ng h∆°n, b·∫°n c√≥ th·ªÉ th√™m:
- Thi·ªáp mini +20k
- H·ªôp qu√† cao c·∫•p +50k
- K√®m chocolate n·∫øu l√† t·∫∑ng ng∆∞·ªùi y√™u.`;

        return { summary, details };
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const age = +document.getElementById("age").value;
        const eventType = document.getElementById("eventType").value;
        const prefs = {
          color: document.getElementById("color").value,
          style: document.getElementById("style").value,
          budget: document.getElementById("budget").value,
        };

        addMessage(
          `Tu·ªïi: ${age}, S·ª± ki·ªán: ${eventType}, M√†u: ${prefs.color}, Phong c√°ch: ${prefs.style}, Ng√¢n s√°ch: ${prefs.budget}`,
          "user"
        );
        const result = generateSuggestion(age, eventType, prefs);

        setTimeout(() => {
          addMessage(result.summary, "bot");
          addMessage(result.details, "bot");
        }, 500);
      });

      resetBtn.addEventListener("click", () => {
        messagesDiv.innerHTML = "";
        addMessage(
          "M√¨nh c√≥ th·ªÉ g·ª£i √Ω m·∫´u hoa theo tu·ªïi, s·ªü th√≠ch v√† s·ª± ki·ªán. B·∫°n mu·ªën th·ª≠ kh√¥ng?"
        );
      });

      // Init chat
      addMessage(
        "Ch√†o b·∫°n! M√¨nh c√≥ th·ªÉ g·ª£i √Ω m·∫´u hoa theo tu·ªïi, s·ªü th√≠ch v√† s·ª± ki·ªán. B·∫°n mu·ªën b·∫Øt ƒë·∫ßu ch·ª©?"
      );
    </script>
  </body>
</html>

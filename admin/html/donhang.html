<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quáº£n lÃ½ khÃ¡ch hÃ ng - Shop Hoa Nguyá»…n Äá»©c</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&display=swap"
      rel="stylesheet"
    />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Roboto", sans-serif;
      }
      body {
        display: flex;
        min-height: 100vh;
        background: #f8f9fa;
      }

      /* Sidebar */
      .sidebar {
        width: 230px;
        background: #ff6600;
        color: #fff;
        display: flex;
        flex-direction: column;
        padding-top: 20px;
      }
      .sidebar h2 {
        text-align: center;
        margin-bottom: 20px;
      }
      .nav-item {
        padding: 12px 20px;
        cursor: pointer;
        transition: 0.3s;
      }
      .nav-item:hover,
      .nav-item.active {
        background: rgba(255, 255, 255, 0.2);
      }

      /* Content */
      .content {
        flex: 1;
        padding: 30px;
        background: #fff;
        margin: 20px;
        border-radius: 10px;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #ff6600;
        margin-bottom: 20px;
      }

      #searchBox {
        width: 300px;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      }
      th,
      td {
        border-bottom: 1px solid #ddd;
        padding: 10px;
      }
      th {
        background: #ff6600;
        color: black;
      }
    </style>
  </head>

  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>ğŸŒ¸ Shop Hoa<br />Nguyá»…n Äá»©c</h2>

      <div class="nav-item" onclick="navigate('mainPage.html')">
        ğŸ  Trang chá»§
      </div>
      <div class="nav-item" onclick="navigate('danhmuc.html')">
        ğŸŒ¼ Danh má»¥c hoa
      </div>
      <div class="nav-item" onclick="navigate('hoa.html')">ğŸŒ· Hoa</div>
      <div class="nav-item" onclick="navigate('khuyenmai.html')">
        ğŸ Khuyáº¿n mÃ£i
      </div>
      <div class="nav-item" onclick="navigate('daban.html')">
        ğŸ’ Sáº£n pháº©m Ä‘Ã£ bÃ¡n
      </div>
      <div class="nav-item active" onclick="navigate('donhang.html')">
        ğŸ§¾ ÄÆ¡n Ä‘áº·t hÃ ng
      </div>
      <div class="nav-item" onclick="navigate('thongTinKHachHang.html')">
        ğŸ‘¤ KhÃ¡ch hÃ ng
      </div>
    </div>
    <script>
      function navigate(page) {
        window.location.href = page;
      }
    </script>

    <!-- Content -->
    <div class="content">
      <div
        style="
          font-family: Arial, sans-serif;
          background-color: #fff8f0;
          padding: 30px;
          color: #333;
        "
      >
        <h2 style="text-align: center; color: #ff6600">ÄÆ N HÃ€NG ÄÃƒ Äáº¶T</h2>

        <div id="order-detail" style="margin-top: 20px"></div>
      </div>

      <div id="order-list"></div>

      <script>
        function loadOrders() {
          const orders = JSON.parse(localStorage.getItem("orders")) || [];
          const listDiv = document.getElementById("order-list");

          if (orders.length === 0) {
            listDiv.innerHTML = `<p style="text-align:center; color:red;">âŒ ChÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o.</p>`;
            return;
          }

          let html = "";

          orders.forEach((order, index) => {
            const firstImg =
              order.gioHang[0]?.image || "https://via.placeholder.com/80";

            html += `
      <div 
        style="
          background:#fff;
          padding:15px;
          border-radius:10px;
          box-shadow:0 2px 8px rgba(0,0,0,0.08);
          margin-bottom:18px;
        "
      >

        <!-- Header -->
        <div style="display:flex; align-items:center; gap:12px;">
          
          <img 
            src="${firstImg}" 
            style="
              width:70px;
              height:70px;
              border-radius:8px;
              object-fit:cover;
              border:1px solid #eee;
            "
          >

          <div style="flex:1;">
            <div><b>MÃ£ Ä‘Æ¡n:</b> ${order.maDonHang}</div>
            <div><b>KhÃ¡ch:</b> ${order.khachHang.hoTen}</div>
            <div style="color:#ff4d00; font-weight:bold; font-size:14px;">
              ${order.trangThai}
            </div>
          </div>

          <div style="color:#e60023; font-weight:bold; font-size:16px;">
            ${order.tongTien.toLocaleString()} Ä‘
          </div>

        </div>

        <!-- Button -->
        <button
          onclick="toggleDetail(${index})"
          style="
            background:#ff6600;
            color:white;
            padding:8px 14px;
            border:none;
            border-radius:6px;
            margin-top:10px;
            cursor:pointer;
            font-size:14px;
          "
        >
          ğŸ‘ Xem chi tiáº¿t
        </button>
        <button
          onclick="toggleDetail(${index})"
          style="
          magin-Left: 400px;
            background:Green;
            color:white;
            padding:8px 14px;
            border:none;
            border-radius:6px;
            margin-top:10px;
            cursor:pointer;
            font-size:14px;
          "
        >
          XÃ¡c nháº­n Ä‘Æ¡n hÃ ng
        </button>
        <button
          onclick="toggleDetail(${index})"
          style="
          magin-Left: 400px;
            background:Red;
            color:white;
            padding:8px 14px;
            border:none;
            border-radius:6px;
            margin-top:10px;
            cursor:pointer;
            font-size:14px;
          "
        >
          Tá»« chá»‘i Ä‘Æ¡n hÃ ng
        </button>


        <!-- Detail -->
        <div 
          id="detail-${index}"
          style="
            margin-top:15px;
            padding:12px;
            border-radius:8px;
            background:#fafafa;
            border:1px solid #eee;
            display:none;
          "
        >

          <p><b>Äá»‹a chá»‰:</b> ${order.khachHang.diaChi}</p>
          <p><b>SÄT:</b> ${order.khachHang.soDienThoai}</p>
          <p><b>Ghi chÃº:</b> ${order.khachHang.ghiChu || "KhÃ´ng cÃ³"}</p>

          <h4 style="margin-top:15px;">ğŸ“¦ Sáº£n pháº©m</h4>

          <table style="width:100%; border-collapse:collapse; margin-top:12px;">
            <tr>
              <th style="border:1px solid #ddd; padding:8px; background:#fff3e0;">áº¢nh</th>
              <th style="border:1px solid #ddd; padding:8px; background:#fff3e0;">TÃªn SP</th>
              <th style="border:1px solid #ddd; padding:8px; background:#fff3e0;">SL</th>
              <th style="border:1px solid #ddd; padding:8px; background:#fff3e0;">GiÃ¡</th>
              <th style="border:1px solid #ddd; padding:8px; background:#fff3e0;">Tá»•ng</th>
            </tr>

            ${order.gioHang
              .map(
                (sp) => `
              <tr>
                <td style="border:1px solid #ddd; padding:8px;">
                  <img 
                    src="${sp.image}" 
                    style="width:60px; height:60px; object-fit:cover; border-radius:5px;"
                  >
                </td>
                <td style="border:1px solid #ddd; padding:8px;">${sp.name}</td>
                <td style="border:1px solid #ddd; padding:8px;">${
                  sp.quantity
                }</td>
                <td style="border:1px solid #ddd; padding:8px;">${sp.price.toLocaleString()} Ä‘</td>
                <td style="border:1px solid #ddd; padding:8px;">
                  ${(sp.price * sp.quantity).toLocaleString()} Ä‘
                </td>
              </tr>
            `
              )
              .join("")}

          </table>
        </div>

      </div>
    `;
          });

          listDiv.innerHTML = html;
        }

        function toggleDetail(i) {
          const box = document.getElementById("detail-" + i);
          box.style.display = box.style.display === "none" ? "block" : "none";
        }

        window.addEventListener("DOMContentLoaded", loadOrders);
      </script>
    </div>
  </body>
</html>
